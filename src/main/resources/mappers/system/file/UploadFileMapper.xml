<?xml version="1.0" encoding="UTF-8"?>
 <!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
 <mapper namespace="cn.don9cn.blog.model.system.file.UploadFile.mapper">
	<!--<cache type="cn.don9.redis.core.LoggingRedisClusterCache" />-->
	<resultMap type="UploadFile" id="uploadFileResult">
		<id column="CODE" property="code" />
		<result column="FLAG_DEL" jdbcType="VARCHAR" property="flagDel" />
		<result column="CREATE_TIME" jdbcType="VARCHAR" property="createTime" />
		<result column="MODIFY_TIME" jdbcType="VARCHAR" property="modifyTime" />
		<result column="CREATE_BY" jdbcType="VARCHAR" property="createBy" />
		<result column="MODIFY_BY" jdbcType="VARCHAR" property="modifyBy" />
		<result column="Z_MORE01" jdbcType="VARCHAR" property="zMore01" />
		<result column="Z_MORE02" jdbcType="VARCHAR" property="zMore02" />
		<result column="Z_MORE03" jdbcType="VARCHAR" property="zMore03" />
		<result column="Z_MORE04" jdbcType="VARCHAR" property="zMore04" />
		<result column="Z_MORE05" jdbcType="VARCHAR" property="zMore05" />
		<result column="REMARK" jdbcType="VARCHAR" property="remark" />
		<result column="NAME" jdbcType="VARCHAR" property="name" />
		<result column="REAL_NAME" jdbcType="VARCHAR" property="realName" />
		<result column="PATH" jdbcType="VARCHAR" property="path" />
		<result column="LINK" jdbcType="VARCHAR" property="link" />
		
	</resultMap>

	<!-- ******************************* 基础功能 ******************************** -->
	
	<!-- 添加 -->
	<insert id="base_insert" parameterType="UploadFile">
	   <!-- 由于上传文件完成后需返回code,所以此处选择由后台生成code
	   <selectKey keyProperty="code" resultType="String" order="BEFORE">
	      select replace(uuid(), '-', '')
	   </selectKey>
	   -->
	   INSERT INTO UPLOAD_FILE
	   (CODE,FLAG_DEL,CREATE_TIME,MODIFY_TIME,CREATE_BY,MODIFY_BY,
	    Z_MORE01,Z_MORE02,Z_MORE03,Z_MORE04,Z_MORE05,REMARK,
		NAME,REAL_NAME,PATH,LINK)
	   VALUES 
	   (#{code,jdbcType=VARCHAR},#{flagDel,jdbcType=VARCHAR},#{createTime,jdbcType=VARCHAR},
		#{modifyTime,jdbcType=VARCHAR},#{createBy,jdbcType=VARCHAR},#{modifyBy,jdbcType=VARCHAR},
		#{zMore01,jdbcType=VARCHAR},#{zMore02,jdbcType=VARCHAR},#{zMore03,jdbcType=VARCHAR},
		#{zMore04,jdbcType=VARCHAR},#{zMore05,jdbcType=VARCHAR},#{remark,jdbcType=VARCHAR},
		#{name,jdbcType=VARCHAR},#{realName,jdbcType=VARCHAR},#{path,jdbcType=VARCHAR},#{link,jdbcType=VARCHAR})
	</insert>
	
	<!-- 更新 -->
	<update id="base_update" parameterType="UploadFile">
	     UPDATE UPLOAD_FILE
		<set>
			<if test="flagDel !=null and flagDel !=''">FLAG_DEL = #{flagDel,jdbcType=VARCHAR},</if>
			<if test="createTime !=null and createTime !=''">CREATE_TIME = #{createTime,jdbcType=VARCHAR},</if>
			<if test="modifyTime !=null and modifyTime !=''">MODIFY_TIME = #{modifyTime,jdbcType=VARCHAR},</if>
			<if test="createBy !=null and createBy !=''">CREATE_BY = #{createBy,jdbcType=VARCHAR},</if>
			<if test="modifyBy !=null and modifyBy !=''">MODIFY_BY = #{modifyBy,jdbcType=VARCHAR},</if>
			<if test="zMore01 !=null and zMore01 !=''">Z_MORE01 = #{zMore01,jdbcType=VARCHAR},</if>
			<if test="zMore02 !=null and zMore02 !=''">Z_MORE02 = #{zMore02,jdbcType=VARCHAR},</if>
			<if test="zMore03 !=null and zMore03 !=''">Z_MORE03 = #{zMore03,jdbcType=VARCHAR},</if>
			<if test="zMore04 !=null and zMore04 !=''">Z_MORE04 = #{zMore04,jdbcType=VARCHAR},</if>
			<if test="zMore05 !=null and zMore05 !=''">Z_MORE05 = #{zMore05,jdbcType=VARCHAR},</if>
			<if test="remark !=null and remark !=''">REMARK = #{remark,jdbcType=VARCHAR},</if>
		    <if test="name !=null and name !=''">NAME = #{name,jdbcType=VARCHAR},</if>
			<if test="realName !=null and realName !=''">REAL_NAME = #{realName,jdbcType=VARCHAR},</if>
			<if test="path !=null and path !=''">PATH = #{path,jdbcType=VARCHAR},</if>
			<if test="link !=null and link !=''">LINK = #{link,jdbcType=VARCHAR},</if>
			
		</set>
		<where>
			<if test="code != null and code != ''">CODE = #{code,jdbcType=VARCHAR}</if>
		</where>
	</update>

	<!-- 删除 -->
    <update id="base_deleteById" parameterType="String">
       UPDATE UPLOAD_FILE SET FLAG_DEL = 1 WHERE CODE = #{value}
     </update>

	<!-- 批量删除 -->
    <update id="base_deleteBatch">
       UPDATE UPLOAD_FILE SET FLAG_DEL = 1 WHERE CODE IN
       <trim prefix="(" suffix=")" suffixOverrides=",">
          <foreach collection="list" item="code" separator=",">
	          #{code}
          </foreach>
       </trim>
     </update>
     
    <!-- 根据id查询当前实体 -->
	<select id="base_findById" parameterType="String" resultMap="uploadFileResult">
	    SELECT * FROM UPLOAD_FILE WHERE FLAG_DEL != 1 AND CODE = #{code}
	</select>
	
	<!-- 查询所有 -->
	<select id="base_findAll"  resultMap="uploadFileResult">
		SELECT * FROM UPLOAD_FILE WHERE FLAG_DEL != 1
	</select>
	
	<!-- 带参数的分页查询 -->
	<select id="base_findByPage" parameterType="UploadFile" resultMap="uploadFileResult">
	    SELECT * FROM UPLOAD_FILE
	    <where>
	        FLAG_DEL != 1
            <if test="createTime !=null and createTime !=''">AND CREATE_TIME = #{createTime,jdbcType=VARCHAR}</if>
            <if test="modifyTime !=null and modifyTime !=''">AND MODIFY_TIME = #{modifyTime,jdbcType=VARCHAR}</if>
            <if test="createBy !=null and createBy !=''">AND CREATE_BY = #{createBy,jdbcType=VARCHAR}</if>
            <if test="modifyBy !=null and modifyBy !=''">AND MODIFY_BY = #{modifyBy,jdbcType=VARCHAR}</if>
            <if test="zMore01 !=null and zMore01 !=''">AND Z_MORE01 = #{zMore01,jdbcType=VARCHAR}</if>
            <if test="zMore02 !=null and zMore02 !=''">AND Z_MORE02 = #{zMore02,jdbcType=VARCHAR}</if>
            <if test="zMore03 !=null and zMore03 !=''">AND Z_MORE03 = #{zMore03,jdbcType=VARCHAR}</if>
            <if test="zMore04 !=null and zMore04 !=''">AND Z_MORE04 = #{zMore04,jdbcType=VARCHAR}</if>
            <if test="zMore05 !=null and zMore05 !=''">AND Z_MORE05 = #{zMore05,jdbcType=VARCHAR}</if>
            <if test="remark !=null and remark !=''">AND REMARK = #{remark,jdbcType=VARCHAR}</if>
			<if test="name !=null and name !=''"> AND NAME = #{name,jdbcType=VARCHAR}</if>
			<if test="realName !=null and realName !=''"> AND REAL_NAME = #{realName,jdbcType=VARCHAR}</if>
			<if test="path !=null and path !=''"> AND PATH = #{path,jdbcType=VARCHAR}</if>
			<if test="link !=null and link !=''"> AND LINK = #{link,jdbcType=VARCHAR}</if>
			<if test="startDate !=null and startDate !=''"> AND CREATE_TIME &gt; #{startDate,jdbcType=VARCHAR}</if>
			<if test="endDate !=null and endDate !=''"> AND CREATE_TIME &lt; #{endDate,jdbcType=VARCHAR}</if>
	    </where>
		<if test="orderBy !=null and orderBy !=''">
			ORDER BY ${orderBy}
		</if>
	</select>

	<!-- 查询指定条件的实体集合 -->
    <select id="base_findListByParams" parameterType="UploadFile" resultMap="uploadFileResult">
        SELECT * FROM UPLOAD_FILE
        <where>
            FLAG_DEL != 1
            <if test="createTime !=null and createTime !=''">AND CREATE_TIME = #{createTime,jdbcType=VARCHAR}</if>
            <if test="modifyTime !=null and modifyTime !=''">AND MODIFY_TIME = #{modifyTime,jdbcType=VARCHAR}</if>
            <if test="createBy !=null and createBy !=''">AND CREATE_BY = #{createBy,jdbcType=VARCHAR}</if>
            <if test="modifyBy !=null and modifyBy !=''">AND MODIFY_BY = #{modifyBy,jdbcType=VARCHAR}</if>
            <if test="zMore01 !=null and zMore01 !=''">AND Z_MORE01 = #{zMore01,jdbcType=VARCHAR}</if>
            <if test="zMore02 !=null and zMore02 !=''">AND Z_MORE02 = #{zMore02,jdbcType=VARCHAR}</if>
            <if test="zMore03 !=null and zMore03 !=''">AND Z_MORE03 = #{zMore03,jdbcType=VARCHAR}</if>
            <if test="zMore04 !=null and zMore04 !=''">AND Z_MORE04 = #{zMore04,jdbcType=VARCHAR}</if>
            <if test="zMore05 !=null and zMore05 !=''">AND Z_MORE05 = #{zMore05,jdbcType=VARCHAR}</if>
            <if test="remark !=null and remark !=''">AND REMARK = #{remark,jdbcType=VARCHAR}</if>
            <if test="name !=null and name !=''"> AND NAME = #{name,jdbcType=VARCHAR}</if>
			<if test="realName !=null and realName !=''"> AND REAL_NAME = #{realName,jdbcType=VARCHAR}</if>
			<if test="path !=null and path !=''"> AND PATH = #{path,jdbcType=VARCHAR}</if>
			<if test="link !=null and link !=''"> AND LINK = #{link,jdbcType=VARCHAR}</if>
        </where>
		<if test="orderBy !=null and orderBy !=''">
			ORDER BY ${orderBy}
		</if>
    </select>

	<!-- ******************************* 自定义功能 ******************************** -->
	<select id="findListInCodes" resultMap="uploadFileResult">
		SELECT * FROM UPLOAD_FILE WHERE FLAG_DEL != 1 AND CODE IN
		<trim prefix="(" suffix=")" suffixOverrides=",">
			<foreach collection="list" item="code" separator=",">
				#{code}
			</foreach>
		</trim>
	</select>

 </mapper>
